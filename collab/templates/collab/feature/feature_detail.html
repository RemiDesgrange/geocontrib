
<div id="feature_detail">
    {% if rights.feat_modification or request.user.id == feature.user_id  %}

        <i id="btn_feature_edit" class="orange big edit icon "></i>
        <i id="btn_feature_delete" class="trash red big alternate icon "></i>
    {% endif %}
    <table class="ui very basic table">
        <tbody>
          {% for key,val in feature.items %}
              {% if key|display_key %}
                <tr>
                      <td><strong>{{labels|get_dict_item:key}}</strong></td>

                      {% if val %}
                          {% if val == True %}
                            <td><i class="green check icon"></td>
                          {% elif val == False %}
                            <td><i class="inverted red remove icon"></td>
                          {% else %}
                            <td>{{val|feature_val_display}}</td>
                          {% endif %}
                      {% else %}
                          <td><i class="minus icon"></td>
                      {% endif %}
                  </tr>
              {% endif %}
          {% endfor %}
          <tr><td><strong>Auteur</strong></td>
              <td>{{author.username}}</td>
          <tr>
        </tbody>
    </table>
</div>

<div class="ui mini modal">
      <div class="header">Suppression du signalement</div>
      <div class="content">
         <p>Êtes-vous sûr/sure de vouloir supprimer ce signalement&nbsp;?</p>
      </div>
      <div class="actions delete_actions">
          <div class="ui negative button">
            Non
          </div>
          <form action="{% url 'project_feature_detail' project_slug=project.slug feature_type_slug=request.resolver_match.kwargs.feature_type_slug feature_id=request.resolver_match.kwargs.feature_id %}" method='POST'>
              {% csrf_token %}
              <input type="hidden" name="_method" value="delete">
              <button type='submit' class="ui positive right labeled icon button">
                Oui
                <i class="checkmark icon"></i>
              </button>
          </form>
    </div>
</div>
<script>
    // modal confirmation before deletion of feature
    $('#btn_feature_delete').click(function(){
        $('.mini.modal')
          .modal('show')
        ;
    });

    // modify type of cursor
    var edit_btn = document.getElementById("btn_feature_edit");
    edit_btn.style.cursor = "pointer";
    var delete_btn = document.getElementById("btn_feature_delete");
    delete_btn.style.cursor = "pointer";
    $("#btn_feature_edit").on('click', function(e) {
        url = ''
        $.ajax({
          url: url,
          type: 'GET',
          success: function (data) {
              $('#feature_detail').html("");
              $('#feature_menu').hide();
              $('#comments').hide();
              $('#attachments').hide();
              $('#edit_feature').html(data);
          },
          error: function(err) {
            console.log('Error occured', err);
          }
        });

    });

</script>
